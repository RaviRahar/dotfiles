### Installing arch keyring
sudo pacman -S archlinux-keyring 

### Install Rust
curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh

### Installing all pacman packages
sudo pacman -S xorg xorg-xinit xorg-server awesome rofi alacritty light playerctl libnotify xdotool nemo maim imv mpv xclip htop man-db tldr gvfs-mtp ntfs-3g ripgrep gstreamer gst-plugins-base gst-plugins-good gst-plugins-bad gst-plugins-ugly noto-fonts nodejs npm python python-pip base base-devel cmake zip unzip ninja tree-sitter curl clang firefox-developer-edition


### Installing all yay packages
yay -S picom-git vimix-gtk-themes tela-icon-theme nerd-fonts-fira-code neovim-git ctags-git fzf-git

## Android and java stuff
pacman -S jdk-openjdk jdk11-openjdk jdk8-openjdk gradle

yay -S android-sdk android-ndk android-emulator android-udev android-sdk-platform-tools android-platform android-sdk-build-tools android-sdk-cmdline-tools-latest

sudo groupadd android-sdk
sudo gpasswd -a $USER android-sdk
sudo setfacl -R -m g:android-sdk:rwx /opt/android-sdk
sudo setfacl -d -m g:android-sdk:rwX /opt/android-sdk

sudo yes | sdkmanager --licenses


# install kvm to make emulator fast
sudo pacman -S virt-manager qemu vde2 ebtables dnsmasq bridge-utils openbsd-netcat
sudo systemctl enable libvirtd.service
sudo systemctl start libvirtd.service
# In the following file uncomment these bottom two lines
# sudo nvim /etc/libvirt/libvirtd.conf
# unix_sock_group = "libvirt"
# unix_sock_rw_perms = "0770"
sudo usermod -a -G libvirt $(whoami)
newgrp libvirt
sudo systemctl restart libvirtd.service
sudo modprobe -r kvm_intel
sudo modprobe kvm_intel nested=1
echo "options kvm-intel nested=1" | sudo tee /etc/modprobe.d/kvm-intel.conf

## flutter stuff
yay -S flutter-git

sudo groupadd flutterusers
sudo gpasswd -a $USER flutterusers
sudo chown -R :flutterusers /opt/flutter
sudo chmod -R g+w /opt/flutter/
#sudo chown -R $USER:flutterusers /opt/flutter

flutter doctor --android-licenses 
flutter config --no-analytics
dart --disable-analytics

### Installing required neovim packages
sudo npm install -g neovim ls_emmet
sudo pip -H install --upgrade neovim yt-dlp

### Other essential things
# adding user to video group so that he can change brightness
sudo usermod -a -G video $USER

### Placing dotfiles at right destination
cp -r .config/* ~/.config/*
cp home-dir/.* ~/
# Change touchpad device name, Check with: libinput list-devices
sudo cp etc-dir/X11/xorg.conf.d/99-libinput.conf /etc/X11/xorg.conf.d/99-libinput.conf && sudo nvim /etc/X11/xorg.conf.d/99-libinput.conf

# To open terminal through nemo
gsettings set org.cinnamon.desktop.default-applications.terminal exec alacritty
gsettings set org.cinnamon.desktop.default-applications.terminal exec-arg -e

### Placing and setting wallpaper and lockscreen for first time
sudo mkdir /usr/share/backgrounds/wallpapers && sudo cp -r wallpapers/* /usr/share/backgrounds/wallpapers
sudo chmod 644 /usr/share/backgrounds/wallpapers/*

### Finally make boot silent, refer archwiki
